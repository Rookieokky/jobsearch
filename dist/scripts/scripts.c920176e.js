"use strict";angular.module("jobSearchApp",["ngAnimate","ngMaterial","ngResource","ui.router","angularMoment","ui.bootstrap"]).config(["$stateProvider","$urlRouterProvider",function(a,b){a.state("app",{url:"/",views:{header:{templateUrl:"views/header.html",controller:"HeaderCtrl"},content:{templateUrl:"views/main.html",controller:"MainCtrl"},footer:{templateUrl:"views/footer.html"}}}).state("app.jobs",{url:"jobs",views:{"content@":{templateUrl:"views/jobs.html",controller:"JobsCtrl"}}}).state("app.random",{url:"random",views:{"content@":{templateUrl:"views/random.html",controller:"RandomCtrl"}}}).state("app.saved",{url:"saved",views:{"content@":{templateUrl:"views/saved.html",controller:"SavedCtrl"}}}),b.otherwise("/")}]).filter("unsafe",["$sce",function(a){return a.trustAsHtml}]),angular.module("jobSearchApp").controller("MainCtrl",["$scope","$state","resourceService","dialogService",function(a,b,c,d){var e=function(){a.params=c.params,a.params.location||(a.params.location=[]),a.params.company||(a.params.company=[]),a.params.level||(a.params.level=[]),a.params.category||(a.params.category=[])},f=function(a){return!a||0===a.length};a.emptySelection=function(){if(f(a.params.location)&&f(a.params.company)&&f(a.params.level)&&f(a.params.category))return!0},a.removeCriteria=function(a,b){var c=a.indexOf(b);c>-1&&a.splice(c,1)},a.addCriteria=function(a,b){if(!f(b)){var c=a.indexOf(b);c<=-1&&a.push(b)}},a.clear=function(){c.clearParams(),e();var a="All criteria have been reinitialized";d.showDialog(a,b.go("app"),"Success")},a.search=function(){c.updateParams(a.params),b.go("app.jobs")},a.searchRandom=function(){c.updateParams(a.params),b.go("app.random")},e(),c.getCities().query(function(b){a.cities=b}),c.getCompanies().query(function(b){a.companies=b}),a.categories=c.categories,a.levels=c.levels}]).directive("jcBadge",function(){return{restrict:"E",transclude:!0,scope:{parameter:"=param",remove:"&onRemove"},template:'<span ng-repeat="p in parameter" class="badge">{{p}} <button type="button" class="close" aria-label="Close" ng-click="remove({param: p})"><span aria-hidden="true">&times;</span></button></span>'}}),angular.module("jobSearchApp").controller("HeaderCtrl",["$scope","$location",function(a,b){a.isActive=function(a){return a===b.path()}}]),angular.module("jobSearchApp").controller("JobsCtrl",["$scope","resourceService",function(a,b){a.params=b.params;var c=function(a){if(!a||0===a.length)return!0};a.emptySelection=function(){if(c(a.params.location)&&c(a.params.company)&&c(a.params.level)&&c(a.params.category))return!0},a.getResults=function(){a.loading=!0,a.loadMode="indeterminate",b.getJobs().get(b.params,function(b){a.jobs=b,a.loading=!1,a.loadMode="",a.last=!1,a.first=!1,a.jobs.page>=a.jobs.page_count-1&&(a.last=!0),0===a.jobs.page&&(a.first=!0),0===a.jobs.results.length&&(a.message="No jobs found.",a.showError=!0)},function(){a.loading=!1,a.loadMode="",a.message="Error while searching for jobs.",a.showError=!0})},a.getResults(),a.tab="all",a.previous=function(){a.jobs.page>0&&(b.updatePage(a.jobs.page-1),a.getResults())},a.next=function(){a.jobs.page<a.jobs.page_count-1&&(b.updatePage(a.jobs.page+1),a.getResults())},a.saveJob=function(a){b.saveJob(a)},a.isSaved=function(a){return b.isSaved(a)}}]),angular.module("jobSearchApp").controller("RandomCtrl",["$scope","resourceService",function(a,b){a.pageCount=1,a.params=b.params,a.isSaved=!1;var c=function(a){if(!a||0===a.length)return!0};a.emptySelection=function(){if(c(a.params.location)&&c(a.params.company)&&c(a.params.level)&&c(a.params.category))return!0},a.getRandomJob=function(c){var d=b.params;d.page=c,a.loading=!0,a.loadMode="indeterminate",b.getJobs().get(d,function(c){var d=c;if(a.loading=!1,a.loadMode="",a.last=!1,a.pageCount=d.page_count,0===d.results.length)a.message="No jobs found.",a.showError=!0;else{if(1===d.results.length)a.last=!0,a.randomJob=d.results[0];else{var e=b.randomInt(0,d.results.length-1);a.randomJob=d.results[e]}a.isSaved=b.isSaved(a.randomJob)}},function(){a.loading=!1,a.loadMode="",a.message="Error while searching for jobs.",a.showError=!0})},a.getRandomJob(0),a.next=function(){var c=0;this.pageCount>1&&(c=b.randomInt(0,this.pageCount-1)),a.getRandomJob(c)},a.saveJob=function(){b.saveJob(a.randomJob),a.isSaved=b.isSaved(a.randomJob)}}]),angular.module("jobSearchApp").controller("SavedCtrl",["$scope","resourceService",function(a,b){a.params=b.params;var c=function(a){if(!a||0===a.length)return!0};a.emptySelection=function(){if(c(a.params.location)&&c(a.params.company)&&c(a.params.level)&&c(a.params.category))return!0},a.savedJobs=b.savedJobs,0===a.savedJobs.length&&(a.message="No jobs saved.",a.showError=!0)}]),angular.module("jobSearchApp").constant("baseURL","https://api-v2.themuse.com/").service("resourceService",["$resource","baseURL",function(a,b){this.params={page:0},this.getJobs=function(){return a(b+"jobs/:jobId",null)},this.clearParams=function(){this.params={page:0}},this.updatePage=function(a){this.params.page=a},this.updateParams=function(a){a.location&&0!==a.location.length?this.params.location=a.location:delete this.params.location,a.company&&0!==a.company.length?this.params.company=a.company:delete this.params.company,a.category&&0!==a.category.length?this.params.category=a.category:delete this.params.category,a.level&&0!==a.level.length?this.params.level=a.level:delete this.params.level,this.params.page=0},this.randomInt=function(a,b){return Math.floor(Math.random()*(b-a+1)+a)},this.getCities=function(){return a("cities.json")},this.getCompanies=function(){return a("companies.json")},this.levels=["Internship","Entry Level","Mid Level","Senior Level"],this.categories=["Account Management","Business & Strategy","Creative & Design","Customer Service","Data Science","Editorial","Education","Engineering","Finance & Data","Fundraising & Development","Healthcare & Medicine","HR & Recruiting","Legal","Marketing & PR","Operations","Project & Product Management","Retail Sales","Social Media & Community"],this.savedJobs=[],this.isSaved=function(a){for(var b=this.savedJobs,c=b.length-1;c>=0;c--)if(b[c].id===a.id)return!0;return!1},this.saveJob=function(a){this.isSaved(a)||this.savedJobs.push(a)}}]).service("dialogService",["$mdDialog",function(a){this.showDialog=function(b,c,d){a.show(a.alert().parent(angular.element(document.body)).clickOutsideToClose(!0).title(d).textContent(b).ariaLabel("Alert Message").ok("OK").targetEvent(c))}}]),angular.module("jobSearchApp").run(["$templateCache",function(a){a.put("views/footer.html",'<div class="footer"> <div class="container"> <p>Powered by Clearlance</p> </div> </div>'),a.put("views/form.html","<p>This is the about view.</p>"),a.put("views/header.html",'<div class="header"> <div class="navbar navbar-inverse" role="navigation"> <div class="container"> <div class="navbar-header"> <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#js-navbar-collapse"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span> </button> <a class="navbar-brand" href="#/">Micropak Job Search</a> </div> <div class="collapse navbar-collapse" id="js-navbar-collapse"> <ul class="nav navbar-nav"> <li ng-class="{ active: isActive(\'/\')}"><a ui-sref="app">Search Jobs</a></li> <li ng-class="{ active: isActive(\'/jobs\')}"><a ui-sref="app.jobs">Job Results</a></li> <li ng-class="{ active: isActive(\'/random\')}"><a ui-sref="app.random">Randomize</a></li> <li ng-class="{ active: isActive(\'/saved\')}"><a ui-sref="app.saved">My Job Lists</a></li> </ul> </div> </div> </div> </div>'),a.put("views/jobs.html",'<div class="row row-center"> <div class="row"> <h1>Micropak Job Search</h1> </div> <hr> <div class="row"> <p class="col-sm-12"> <span class="lead">Search criteria :</span> <span class="lead" ng-if="emptySelection()">Nothing selected</span> <span class="badge" ng-repeat="l in params.location">{{l}}</span> <span class="badge" ng-repeat="c in params.company">{{c}}</span> <span class="badge" ng-repeat="le in params.level">{{le}}</span> <span class="badge" ng-repeat="ca in params.category">{{ca}}</span> <br><br> <a class="btn btn-primary" ui-sref="app"><i class="fa fa-pencil"></i> Modify search</a> </p> </div> <hr> <div class="row"> <p class="lead col-sm-12"><span class="glyphicon glyphicon-search"></span> Search results : </p> </div> <div class="row"> <!-- Loader --> <div layout="row" layout-sm="column" layout-align="space-around" ng-show="loading"> <md-progress-circular md-mode="{{loadMode}}" md-diameter="80"></md-progress-circular> </div> <!-- Error messages --> <div ng-show="showError"> <p class="lead"> <i class="fa fa-exclamation-triangle"></i> {{message}} <a ui-sref="app">Modify search</a> </p> </div> <!-- Jobs list --> <div ng-hide="loading || showError"> <div ng-hide="showError" class="pagination"> <nav> <ul class="pager"> <li class="previous"><a ng-hide="first" ng-click="previous()"><span aria-hidden="true">&larr;</span> Previous</a></li> <li class="page-number">Page : {{jobs.page+1}} / {{jobs.page_count}} </li> <li class="next"><a ng-hide="last" ng-click="next()">Next <span aria-hidden="true">&rarr;</span></a></li> </ul> </nav> </div> <div class="clearfix"></div> <div class="job-list col-sm-4" ng-repeat="job in jobs.results"> <div class="panel panel-default"> <div class="panel-body"> <h4 class="company">{{job.name}} <small> - {{job.company.name}}</small></h4> <p class="date"><i class="fa fa-clock-o"></i> Posted <b am-time-ago="job.publication_date"></b></p> <p class="locations">Locations : <span ng-repeat="location in job.locations" class="badge">{{location.name}} </span></p> <p class="categories">Categories : <span ng-repeat="category in job.categories" class="badge">{{category.name}} </span></p> <p class="categories">Levels : <span ng-repeat="level in job.levels" class="badge">{{level.name}} </span></p> </div> <div class="panel-footer"> <a class="btn btn-primary" ng-if="!isSaved(job)" ng-click="saveJob(job)"><i class="glyphicon glyphicon-heart-empty"></i> Save </a> <span class="btn btn-default disabled" ng-if="isSaved(job)" class="page-number"><i class="glyphicon glyphicon-heart heart-red"></i> Saved</span> <a class="btn btn-primary" ng-href="{{job.refs.landing_page}}" target="_blank">See more</a> </div> </div> </div> <div class="clearfix"></div> <div ng-hide="showError" class="pagination"> <nav> <ul class="pager"> <li class="previous"><a ng-hide="first" ng-click="previous()"><span aria-hidden="true">&larr;</span> Previous</a></li> <li class="page-number">Page : {{jobs.page+1}} / {{jobs.page_count}} </li> <li class="next"><a ng-hide="last" ng-click="next()">Next <span aria-hidden="true">&rarr;</span></a></li> </ul> </nav> </div> </div> </div> </div>'),a.put("views/main.html",'<div class="jumbotron"> <h1>Micropak Job Search</h1> <hr> <div class="row"> <p class="col-sm-12 lead"> What are you looking for? <small>( You can add many entries to each filter. )</small><br><br> </p> </div> <form class="search-fields form-inline"> <div class="row"> <form name="locationForm"> <div class="form-group col-sm-3"> <label class="sr-only">City</label> <input type="text" class="form-control" ng-model="city" placeholder="City" uib-typeahead="c for c in cities | filter:$viewValue | limitTo:10" typeahead-min-length="1" typeahead-on-select="addCriteria(params.location, city); city=\'\'"> <button class="btn btn-primary" ng-click="addCriteria(params.location, city); city=\'\'" ng-disabled="!city"> <span class="glyphicon glyphicon-plus"></span> </button> </div> </form> <form name="companyForm"> <div class="form-group col-sm-3"> <label class="sr-only">Companies</label> <input type="text" class="form-control" ng-model="company" placeholder="Companies" uib-typeahead="co for co in companies | filter:$viewValue | limitTo:10" typeahead-min-length="1" typeahead-on-select="addCriteria(params.company, company); company=\'\'"> <button class="btn btn-primary" ng-click="addCriteria(params.company, company); company=\'\'" ng-disabled="!company"> <span class="glyphicon glyphicon-plus"></span> </button> </div> </form> <form name="levelForm"> <div class="form-group col-sm-3"> <label class="sr-only">Job level</label> <input type="text" class="form-control" ng-model="level" placeholder="Job level" uib-typeahead="l for l in levels | filter:$viewValue" typeahead-min-length="1" typeahead-on-select="addCriteria(params.level, level); level=\'\'"> <button class="btn btn-primary" ng-click="addCriteria(params.level, level); level=\'\'" ng-disabled="!level"> <span class="glyphicon glyphicon-plus"></span> </button> </div> </form> <form name="categoryForm"> <div class="form-group col-sm-3"> <label class="sr-only">Category</label> <input type="text" class="form-control" ng-model="category" placeholder="Category" uib-typeahead="ca for ca in categories | filter:$viewValue | limitTo:10" typeahead-min-length="1" typeahead-on-select="addCriteria(params.category, category); category=\'\'"> <button class="btn btn-primary" ng-click="addCriteria(params.category, category); category=\'\'" ng-disabled="!category"> <span class="glyphicon glyphicon-plus"></span> </button> </div> </form> </div> </form> <br> <p class="text-left"> Your Selection : <span ng-if="emptySelection()"><i class="fa fa-exclamation-triangle"></i> <b>Nothing selected</b></span> <jc-badge param="params.location" on-remove="removeCriteria(params.location, param)"></jc-badge> <jc-badge param="params.company" on-remove="removeCriteria(params.company, param)"></jc-badge> <jc-badge param="params.level" on-remove="removeCriteria(params.level, param)"></jc-badge> <jc-badge param="params.category" on-remove="removeCriteria(params.category, param)"></jc-badge> </p> <p><br> <button class="btn btn-lg btn-primary" ng-click="searchRandom()">Random jobs <i class="fa fa-hand-o-right"></i></button> <button class="btn btn-lg btn-success" ng-click="search()">Find a job <span class="glyphicon glyphicon-ok"></span></button> <button class="btn btn-lg btn-warning" ng-click="clear()">Clear <span class="glyphicon glyphicon-remove"></span></button> </p> </div>'),a.put("views/random.html",'<div class="row row-center"> <div class="row"> <h1>Micropak Job Search </h1> </div> <hr> <div class="row"> <p class="col-sm-12"> <span class="lead">Search criteria :</span> <span class="lead" ng-if="emptySelection()">Nothing selected</span> <span class="badge" ng-repeat="l in params.location">{{l}}</span> <span class="badge" ng-repeat="c in params.company">{{c}}</span> <span class="badge" ng-repeat="le in params.level">{{le}}</span> <span class="badge" ng-repeat="ca in params.category">{{ca}}</span> <br> </p> </div> <hr> <div class="row"> <!-- Loader --> <div layout="row" layout-sm="column" layout-align="space-around" ng-show="loading"> <md-progress-circular md-mode="{{loadMode}}" md-diameter="80"></md-progress-circular> </div> <!-- Error messages --> <div ng-show="showError"> <p class="lead"> <i class="fa fa-exclamation-triangle"></i> {{message}} <a ui-sref="app">Modify search</a> </p> </div> <!-- Jobs list --> <div ng-hide="loading || showError"> <div class="clearfix"></div> <div class="job-list col-sm-8"> <div class="panel panel-default"> <div class="panel-body panel-big"> <h4 class="company">{{randomJob.name}} <small> - {{randomJob.company.name}}</small></h4> <p class="date"><i class="fa fa-clock-o"></i> Posted <b am-time-ago="randomJob.publication_date"></b></p> <p class="locations">Locations : <span ng-repeat="location in randomJob.locations" class="badge">{{location.name}} </span></p> <p class="categories">Categories : <span ng-repeat="category in randomJob.categories" class="badge">{{category.name}} </span></p> <p class="categories">Levels : <span ng-repeat="level in randomJob.levels" class="badge">{{level.name}} </span></p> <p ng-bind-html="randomJob.contents | unsafe"></p> </div> <div class="panel-footer"> <a class="btn btn-success" ng-href="{{randomJob.refs.landing_page}}" target="_blank"> Apply </a> <a class="btn btn-primary" ng-hide="isSaved" ng-click="saveJob()"><i class="glyphicon glyphicon-heart-empty"></i> Save </a> <span class="btn btn-default disabled" ng-show="isSaved" class="page-number"><i class="glyphicon glyphicon-heart heart-red"></i> Saved</span> <a class="btn btn-primary" ng-hide="last" ng-click="next()">Next <span aria-hidden="true">&rarr;</span></a> </div> </div> </div> <div class="clearfix"></div> </div> </div> </div>'),a.put("views/saved.html",'<div class="row row-center"> <div class="row"> <h1>Micropak Job Search </h1> </div> <hr> <div class="row"> <p class="lead col-sm-12"> <span class="glyphicon glyphicon-search"></span> My Saved Jobs : </p> </div> <div class="row"> <!-- Error messages --> <div ng-show="showError"> <p class="col-sm-12 lead"> <i class="fa fa-exclamation-triangle"></i> {{message}} <a ui-sref="app.random">Browse Jobs</a> </p> </div> <!-- Jobs list --> <div ng-hide="loading || showError"> <div class="clearfix"></div> <div class="job-saved col-sm-4" ng-repeat="job in savedJobs"> <div class="panel panel-default"> <div class="panel-body"> <h4 class="company">{{job.name}} <small> - {{job.company.name}}</small></h4> </div> <div class="panel-footer"> <span class="date"><i class="fa fa-clock-o"></i> Posted <b am-time-ago="job.publication_date"></b></span> <a class="btn-right btn btn-primary" ng-href="{{job.refs.landing_page}}" target="_blank">Apply</a> <div class="clearfix"></div> </div> </div> </div> <div class="clearfix"></div> </div> </div> </div>')}]);